<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fire Department incident plot</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=PT+Sans" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Alegreya+Sans+SC:100|Shadows+Into+Light|Lato:100i|Zilla+Slab"
          rel="stylesheet">
    <link href="./static/nouislider/nouislider.css" rel="stylesheet">

    <style>
        /* <html> <div> <body> */
        body {
            position: static;
            height: 3000px;
            background-color: #343434;
            overflow-x: hidden;
        }

        #logo {
            position: fixed;
            z-index: 5;
            top: 0;
            right: 0;
            height: 57px;
            left: 0;
            padding-top: 0;
            text-align: center;
            font-family: 'Shadows Into Light', cursive;
            font-size: 40px;
            color: whitesmoke;
            background-color: #292823;
        }

        .container {
            position: fixed;
            top: 80px;

            width: 55px;
            display: inline-block;
            cursor: pointer;
            z-index: 10;
        }

        .socialMediaBox {
            position: fixed;
            top: 80px;
            width: 55px;
            display: inline-block;
            cursor: pointer;
            z-index: 10;
        }

        .bar1, .bar2, .bar3 {
            width: 35px;
            height: 5px;
            background-color: #4eff35;
            margin: 6px 0;
            transition: 0.4s;
            z-index: 10;
        }
        .container:hover {
            opacity: 0.7;
        }

        .change .bar1 {
            -webkit-transform: rotate(-45deg) translate(-9px, 6px);
            transform: rotate(-45deg) translate(-9px, 6px);
        }

        .change .bar2 {
            opacity: 0;
        }

        .change .bar3 {
            -webkit-transform: rotate(45deg) translate(-8px, -8px);
            transform: rotate(45deg) translate(-8px, -8px);
        }

        .sidenav {
            height: 100%;
            width: 0;
            position: fixed;
            z-index: 8;
            top: 58px;
            left: 0;
            overflow-x: hidden;
            overflow-y: auto;
            transition: 0.5s;
            padding-top: 130px;
            font-family: 'Alegreya Sans SC', sans-serif;
            color: white;
            background-color: rgba(24, 24, 24, 0.9);
            background-repeat: no-repeat;
            line-height: 20px;
            /*border-left:  solid 4px #D9AC42;*/
        }

        .sidenav a {
            padding: 8px 8px 8px 10px;
            font-size: 25px;
            color: #bbbbbb;
            transition: 0.3s;
        }

        .sidenav b {
            display: block;
            padding: 8px 8px 8px 32px;
            font-size: 18px;
            color: #bbbbbb;
            transition: 0.3s;
        }

        .sidenav a:hover, .offcanvas a:focus {
            color: #f1f1f1;
        }

        @media screen and (max-height: 1000px) {
            .sidenav {
                padding-top: 75px;
            }

            .sidenav a {
                font-size: 18px;
            }
        }

        .playground {
            position: relative;
            width: 90%;
            height: inherit;
            top: 80px;
            left: 5%;
            padding: 0 8px;
            color: white;
            font-size: 40px;
            font-family: 'Alegreya Sans SC', sans-serif;
            /*border: 0.3px solid white;*/
        }

        .card {
            padding: 15px;
        }

        .title {
            background-color: #1e1e1e;
            width: 100%;
            height: 20px;
            color: white;
            font-family: "Copperplate";
            font-size: larger;
            padding: 0;
        }

        .column {
            float: left;
            font-size: 15px;
            height: 500px;
            border: 1px solid rgba(164, 214, 172, 0.44);
            box-shadow: 0 0 1em #261a00;
            padding: 0;
            margin-bottom: 25px;
            margin-left: 30px;
            background-color: rgba(13, 18, 27, 0.21);
        }

        .columnSummary {
            float: left;
            font-size: 15px;
            height: 500px;
            border: 1px solid rgba(213, 214, 177, 0.44);
            box-shadow: 0 0 1em #261a00;
            padding: 0;
            margin-bottom: 25px;
            margin-left: 30px;
            background-color: rgba(13, 18, 27, 0.21);
        }

        /* element name */
        #map {
            height: 410px;
            width: inherit;
        }

        #floating-panel {
            position: absolute;
            top: 125px;
            width: inherit;
            text-align: center;
            z-index: 2;
        }

        #sliderGround {
            position: absolute;
            height: 50px;
            width: inherit;
            text-align: center;
            font-family: 'PT Sans', sans-serif;
            color: white;
        }

        /* loader */
        #loader {
            border: 8px solid #5a5a5a;
            border-radius: 50%;
            border-top: 8px solid #D9AC42;
            width: 45px;
            height: 45px;
            margin: auto;
            animation: spin 1.5s cubic-bezier(0.1, 0.5, 0.2, 0.1) infinite;
            z-index: 2;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        /* d3 bar */
        text {
            font: 10px sans-serif;
            color: white;
            text-align: left;
        }

        text.value {
            font-size: 120%;
            fill: white;
        }

        /* d3 pie */
        .arc text {
            font: 10px sans-serif;
            text-anchor: middle;
        }

        .arc path {
            stroke: #fff;
        }

        .bar div {
            font: 10px sans-serif;
            background-color: steelblue;
            text-align: right;
            padding: 3px;
            margin: 3px;
            color: white;
        }

        .pie div {
            font: 10px sans-serif;
        }

        /* Popup container - "help" */
        /* class */
        .popup {
            position: fixed;
            cursor: pointer;
            width: 4%;
            bottom: 40px;
            left: 20px;
            border-style: solid;
            border-radius: 3px;
            border-color: #424139;
            border-width: 1px;
            z-index: 5;
            text-align: center;
            background-color: #000000;
            color: #4eff35;
        }

        /* The actual popup */
        .popup .popuptext {
            visibility: hidden;
            width: 400px;
            background-color: #1e1e1e;
            color: #4eff35;
            text-align: center;
            border-radius: 6px;
            padding: 8px 0;
            position: absolute;
            top: -110%;
            left: 10%;
            margin-left: -20px;
        }

        /* arrow */
        .popup .popuptext::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 9%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #4eff35 transparent transparent transparent;
        }


        /* Toggle this class - hide and show the popup */
        .popup .show {
            visibility: visible;
            -webkit-animation: fadeIn 1s;
            animation: fadeIn 1s;
        }

        hr {
            margin-left: 2px;
            margin-right: 20px;
            opacity: 0.5;
        }

        /* no ui slider */
        #slider {
            width: inherit;
        }

        #submitDates {
            position: relative;
            top: 1px;
        }

        .example-val {
            color: white;
            display: inline-block;
        }

        /* over-writing the nouislider css */
        .noUi-connect {
            background: #D9AC42;
        }

        /* the actual handle */
        .noUi-horizontal .noUi-handle {
            width: 15px;
            height: 28px;
            left: -7px;
            top: -6px;
            background: rgba(255, 255, 255, 0.76);
        }

        /* two strips on handle*/
        .noUi-handle:before,
        .noUi-handle:after {
            content: "";
            display: block;
            position: absolute;
            height: 14px;
            width: 1px;
            background: #855f18;
            left: 5px;
            top: 6px;
        }

        /* submit button */
        .button {
            background-color: floralwhite;
            border: 0.2px solid #BEBEBE;
            color: black;
            padding: 3px 3px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 10px;
            cursor: pointer;
            border-radius: 3px;
            box-shadow: 0 3px 4px rgba(0,0,0,.3);
        }

        /* social media */
        .fa {
            padding: 10px;
            font-size: 25px;
            width: 35px;
            text-align: center;
        }


        .fa:hover {
            opacity: 0.7;
        }

        .fa-facebook {
            background: #3B5998;
            color: white;
        }

        .fa-twitter {
            background: #55ACEE;
            color: white;
        }

        .fa-google {
            background: #dd4b39;
            color: white;
        }

        .fa-linkedin {
            background: #007bb5;
            color: white;
        }

        #input {
            text-align: center;
        }

        .loading {
            text-align: match-parent;
        }

        .loadingMsg {
            text-align: match-parent;
        }

        ::-webkit-scrollbar {
            -webkit-appearance: none;
            width: 4px;
        }
        ::-webkit-scrollbar-thumb {
            border-radius: 4px;
            background-color: rgba(230, 255, 216, 0.55);
            -webkit-box-shadow: 0 0 1px rgb(0, 0, 0);
        }

        #input input {
            border-radius: 3px;
            border: 1px solid black;
            height: 16px;
            padding: 1px;
            margin: 1px;
            font-family: Geneva;
        }

    </style>
</head>

<body>
<script src="./static/nouislider/nouislider.js"></script>
<div id="logo">
    <div style="position: absolute; left: 5px">
        <img src="https://admissions.vanderbilt.edu/insidedores/manage/wp-content/uploads/vanderbilt-logo-2008.gif"
             width="45" height="45">
    </div>
    vData
</div>

<!-- Menu sign - wiz animation -->
<div class="container"  style = "left:18px" onclick="barToX(this)">
    <div class="bar1"></div>
    <div class="bar2"></div>
    <div class="bar3"></div>
</div>

<div class="socialMediaBox" style="right:0">
    <i class="fa fa-facebook"></i>
    <i class="fa fa-twitter"></i>
    <i class="fa fa-google"></i>
    <i class="fa fa-linkedin"></i>
</div>

<!-- Ask for user input -->
<div class="sidenav" id="mySideNav">
    <a>Fire Department</a><br>
    <b>simple incident</b>
    <hr>

    <a><i class="fa fa-file-text"></i>&nbsp;&nbsp;Mongo DB Address:</a><br>
    <b>127.0.0/simple-incident</b><br>

    <a><i class="fa fa-bar-chart"></i>&nbsp;Chart Options: </a><br>
    <b>
        <select id="chartList">
            <option value="markers">Markers On Map</option>
            <option value="heat">Heat Map</option>
            <option value="bar">Bar Chart(N.A.)</option>
            <option value="pie">Pie Chart(N.A.)</option>
        </select><br>
    </b>
    <a><i class="fa fa-calendar"></i>&nbsp;&nbsp;Year: </a><br>
    <b>
        <select id="incidentYear">
            <option id="2014">2014</option>
            <option id="2015">2015</option>
            <option id="201">2016</option>
        </select><br>
    </b>
    <br><br><br><br><br><br><br><br><br><br>
    <div class="popup" onclick="help()">
        <i class="fa fa-lightbulb-o" style="padding-left:0; font-size: 14px; width: 1.5%"></i>help
        <span class="popuptext" id="pop">Click on the dots to view more details of an accident</span>
    </div>
    <b>visor-vu/2017/analytics dashboard</b><br>
</div>


<!-- where maps, graphs, charts live -->
<div class="playground">
    Overview
    <hr>
<!-- map column -->
    <div class="column" id="mapView" style="width: 740px">
        <div class="title">
            Nashville Map
            <i class="fa fa-arrows-alt" onclick = "enlargeMap()" style="font-size: 16px; float: right; padding: 1px; color: #4eff35"></i>
        </div>
        <div id="initialHint" style = "position: absolute; z-index: 3; background-color: rgba(0,0,0,0.84); width: inherit; height: 60px">
            <i class="fa fa-angle-double-down"></i>
            <span style="font-size: 17px;">Please choose a date interval between 1 day and 1 month</span>
        </div>
        <div id="map" style="color: black"></div>
        <div id="floating-panel">
            <button class="button" style="background-color: lightgoldenrodyellow" id='markers' onclick="toggleMarkers(markersArr)">
            Hide Markers</button>
            <button class="button" id='heat' onclick="setHeatMap()">
            Generate heatmap</button>
            <button class="button" onclick="changeGradient()">
            Change gradient</button>
            <button class="button" style="background-color: lightgray" id="vehide"onclick="hideVehicles()">
            Hide Responding incidents</button>
        </div>
        <div style="width: inherit; position:absolute; top: 10%; text-align: center; z-index: 2">
            <div id="loader" style="display: none"></div>
        </div>
        <div id="sliderGround">
            <div id="slider"></div>
            <div id="input" style="margin-top: 5px; font-family: 'Zilla Slab'">
                &#x1F5D3;&nbsp;
                From: <input type="date" min="2014-01-01" max="2016-12-31" value="2014-06-01" id="date1"/>
                Hour: <input type="number" min="0" max="23" id="hour1" value="10"/>
                &nbsp; &nbsp; &nbsp;
                To: <input type="date" min="2014-01-01" max="2017-01-01" value="2014-06-20" id="date2"/>
                Hour: <input type="number" min="0" max="23" id="hour2" value="10"/>
                &nbsp; &nbsp; &nbsp;
                <button class="button" style = "background-color: #D9AC42; padding: 3px 5px; color: white; 
                    font-size: 14px; font-family:'Zilla Slab'" id="submitDates" onclick="getData()">
                Submit dates</button>
            </div>
            </br>
        </div>
    </div>

<!-- summary column-->    
    <div class="columnSummary" id="summaryView" style = "width: 33%">
        <div class="title">Summary:</div>
        <div class="loading">
            <i class="fa fa-spinner fa-pulse"></i>
            <span class="loadingMsg">waiting for user input</span>
        </div>

        <div class="card">
            <div class="example-val" id="event"></div>
            <p id="total"></p>
            <div id="chooseType" style="display: block"></div>
        </div>
    </div>

<!-- bar chart column--> 
    <div class="column" id="barView" style="width: 42%; height: 400px">
        <div class="title">Bar Chart - Level of Severity:</div>
        <div class="loading">
            <i class="fa fa-spinner fa-pulse"></i>
            <span class="loadingMsg">waiting for user input</span>
        </div>
        <div class="card">
            <div class="bar"></div>
        </div>
    </div>

<!-- pie chart column--> 
    <div class="column" id="pieView" style="width: 50%; height: 400px">
        <div class="title">Pie Chart - %Types of Incidents:</div>
        <div class="loading">
            <i class="fa fa-spinner fa-pulse"></i>
            <span class="loadingMsg">waiting for user input</span>
        </div>
        <div class="card">
            <div id="pieForType" style="width: 610px; height: 360px; margin:0; padding: 0"></div>        
        </div>
    </div>

    Summary
    <hr>
</div>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
<script src="https://d3js.org/d3.v4.js"></script>
<script src="https://www.gstatic.com/charts/loader.js"></script>
<script src="./static/incidentscode.js"></script>

<script async defer src=
        "https://maps.googleapis.com/maps/api/js?key=AIzaSyBA8wJvIcEqHSAH_fACbQKr6JV2vX-nT-Q
        &libraries=visualization&callback=initMap">
</script>
</body>
</html>